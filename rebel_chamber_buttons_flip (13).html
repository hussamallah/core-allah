<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Rebel Chamber â€” Buttons Heat Map</title>
  <style>
    :root{
      --bg:#0a0b10; --card:#12141b; --border:#262b35; --muted:#a3acba; --primary:#f2f5f9;
      --rebel-base:#FF3EA5; --rebel-glow:#FF85C5;
      --gold:#ffd36a; --gold-glow:#ffe9a6;
      --red:#ffb9bd; --green:#bdf0d5;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background:
        radial-gradient(1200px 600px at 60% -10%, rgba(255,62,165,.18), transparent 60%),
        radial-gradient(800px 400px at 20% 110%, rgba(255,133,197,.14), transparent 60%),
        #0a0b10;
      color:var(--primary);
      font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Inter,sans-serif
    }
    .page{max-width:1120px;margin:0 auto;padding:24px}

    /* Orbs */
    .orb{
      position:fixed; width:180px; height:180px; border-radius:50%;
      background: radial-gradient(120px 120px at 35% 30%, rgba(255,255,255,.18), rgba(255,255,255,.06));
      border:1px solid rgba(255,255,255,.22);
      box-shadow: 0 0 28px rgba(255,133,197,.18), inset 0 0 20px rgba(255,255,255,.05);
      display:grid; place-items:center; text-align:center;
      pointer-events:none; z-index:10;
    }
    .orb .emoji{ font-size:42px; filter:drop-shadow(0 0 12px rgba(255,133,197,.35)) }
    .bird-orb{ top:18px; right:24px; }
    .left-orb{ bottom:24px; left:24px; }

    /* Title */
    .title-rebel{
      display:flex; align-items:center; gap:10px; justify-content:center; text-align:center;
      font-size:28px; font-weight:800; letter-spacing:.4px; margin:0 0 24px;
      color:var(--rebel-base);
      text-shadow: 0 0 14px rgba(255,133,197,.55), 0 0 26px rgba(255,62,165,.35);
      filter: drop-shadow(0 0 10px rgba(255,62,165,.25));
    }
    .title-rebel .emoji{ font-size:30px; filter:drop-shadow(0 0 10px rgba(255,133,197,.45)) }

    /* Heat map buttons */
    .heat-wrap{margin:6px 0 12px}
    .heat-title{margin:0 0 8px;font-size:16px;letter-spacing:.3px}
    .lines-list{display:grid;gap:10px;grid-template-columns:repeat(3,minmax(0,1fr))}
    .btn-row{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:4px;padding:10px 12px;border-radius:14px;min-height:66px;background:linear-gradient(180deg,#0f1117,#0c0e13);border:1.25px solid #2c313c;box-shadow:inset 0 0 0 1px rgba(255,255,255,.03);cursor:pointer;text-align:center;transition:border-color .2s,box-shadow .2s,transform .08s;}
    .btn-row:hover{ border-color:#3a495f; transform:translateY(-1px) }
    .btn-row:focus-visible{ outline:none; box-shadow:0 0 0 3px rgba(255,62,165,.28) }
    .btn-row .lhs{display:flex;gap:6px;align-items:center;justify-content:center}
    .btn-row .name{font-weight:900;color:#e7e7e7;font-size:13px;min-width:auto}
        .btn-row .stat{white-space:nowrap;font-weight:900;letter-spacing:.2px;font-size:12px;text-align:center}
    /* state coloring on the right side */
    .btn-row[data-state="C"] .stat{ color:var(--green) }
    .btn-row[data-state="O"] .stat{ color:var(--gold-glow) }
    .btn-row[data-state="F"] .stat{ color:var(--red) }

    /* leak panel removed */

    /* Cards */
    .flip-card{ position:relative; perspective:1000px; height:120px; transition:height .25s ease, transform .14s cubic-bezier(.2,.8,.2,1), box-shadow .2s ease; will-change:transform; transform-origin:center }
    .flip-card .flip-inner{ position:absolute; inset:0; transform-style:preserve-3d; transition:transform .35s ease; z-index:1 }
    .visited-badge{
      position:absolute; bottom:8px; right:8px; font-size:16px; line-height:1;
      opacity:0; transform:translateY(4px) scale(.9);
      transition: opacity .15s ease, transform .2s ease;
      filter:drop-shadow(0 0 6px rgba(255,133,197,.55));
      pointer-events:none; z-index:2;
    }
    .flip-card.visited .visited-badge{ opacity:.95; transform:translateY(0) scale(1) }
    .flip-card.visited .visited-badge{ opacity:.95; transform:translateY(0) scale(1) }
    .flip-card{ position:relative; cursor:pointer; perspective:1000px; height:120px; transition:height .25s ease, transform .14s cubic-bezier(.2,.8,.2,1), box-shadow .2s ease; will-change:transform; transform-origin:center }
    .flip-card:hover, .flip-card:focus-visible{ transform:translateY(-6px) scale(1.04); z-index:5; box-shadow:0 12px 40px rgba(0,0,0,.45) }
    .flip-card .flip-inner{ position:absolute; inset:0; transform-style:preserve-3d; transition:transform .35s ease }
    .flip-card .flip-face{ position:absolute; inset:0; backface-visibility:hidden }
    .flip-card .front{}
    .flip-card .back{ transform:rotateY(180deg); overflow:visible }
    .flip-card.expanded{ height:240px; grid-column: span 2 }
    .compat-card.expanded{ grid-column: 1 / -1 }
    .flip-card.expanded .flip-inner{ transform:rotateY(180deg) }
    .grid8{display:grid;gap:14px;grid-template-columns:repeat(4,1fr);grid-auto-flow:dense}
    .card{position:relative;background:linear-gradient(180deg,#11131a,#0c0e13);border:1px solid #232736;border-radius:12px;padding:14px;min-height:130px;box-shadow:0 10px 30px rgba(0,0,0,.35), 0 0 0 1px rgba(255,255,255,.02)}
    .card.rebel{border-color:rgba(255,62,165,.35); box-shadow:0 0 20px rgba(255,62,165,.25), inset 0 0 0 1px rgba(255,62,165,.2)}
    .card.rebel h3, .card.rebel .speech, #edge-h, #edge-h + article .speech{ text-transform: uppercase }
    .card.rebel h3{font-size:16px;font-weight:800;color:var(--primary);letter-spacing:.2px;margin:0 0 6px;text-shadow:0 0 8px rgba(255,62,165,.22)}
    /* Headline and stars layout */
    .card.rebel h3{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .card.rebel h3 .stars{display:block;text-align:center;margin-top:2px;white-space:normal}
    .speech{font-size:15px;line-height:1.6;color:#e7e2cf;margin:0 0 10px}
    .stars{color:var(--rebel-glow);font-size:12px;letter-spacing:.8px}

    /* Gold $1 card */
    .compat-gold{ 
      border-color: rgba(224,182,90,.55);
      box-shadow: 0 0 38px rgba(255,233,166,.22), inset 0 0 0 1px rgba(255,233,166,.22);
      background: radial-gradient(220px 120px at 20% -10%, rgba(255,233,166,.14), transparent 60%), linear-gradient(180deg,#121317,#0c0e13);
    }
    .compat-gold h3{ margin:0 0 6px; font-size:14px; line-height:1.2; color:#ffd36a; text-shadow: 0 0 10px rgba(255,233,166,.45) }
    .compat-gold .starline{ color:#ffd36a; letter-spacing:.4px; margin:6px 0 }
    .compat-gold ul{ margin:8px 0 0 0; padding-left:18px; list-style:disc }
    .compat-gold li{ margin:4px 0; color:#e7e2cf }

    .codebar{display:flex;justify-content:center;margin-top:20px}
    .pill{display:inline-block;font-size:12px;padding:6px 12px;border-radius:999px;background:#0b0e12;border:1px solid #2a2f38;color:var(--muted)}

    @media (max-width:1100px){
      .grid8{grid-template-columns:1fr 1fr}
    }
  
    @media (min-width: 1280px){ .lines-list{grid-template-columns:repeat(4,1fr)} 
      .flip-card.expanded{ grid-column: 1 / -1; height:260px }
    }

  
    /* Custom emoji cursor for archetype (ğŸª¶) */
    
    #cursor-emoji{
      position:fixed; left:0; top:0; transform:translate(-100px,-100px);
      font-size:28px; line-height:1; pointer-events:none; opacity:0;
      transition:opacity .12s ease, transform .06s ease;
      filter:drop-shadow(0 0 10px rgba(255,133,197,.55));
      z-index:99999;
    }
    @keyframes flashfade{ 0%{opacity:0} 50%{opacity:1} 100%{opacity:.35} }
        </style>
        
</head>
<body>
  <div class="orb left-orb"><div class="emoji">ğŸª¶</div></div>
  <div class="orb bird-orb"><div class="emoji">ğŸª¶</div></div>

  <div class="page">
    <h2 class="title-rebel"><span class="emoji" aria-hidden="true">ğŸª¶</span> Rebel chamber</h2>

    <!-- Heat map as buttons only -->
    <section class="heat-wrap" aria-labelledby="heat-h">
      <h2 id="heat-h" class="heat-title">Your lines (heat map)</h2>
<div class="lines-list" id="lines-list">
        <button class="btn-row" data-line="Control"><span class="lhs"><span class="name">Control</span></span><span class="stat"></span></button>
        <button class="btn-row" data-line="Pace"><span class="lhs"><span class="name">Pace</span></span><span class="stat"></span></button>
        <button class="btn-row" data-line="Boundary"><span class="lhs"><span class="name">Boundary</span></span><span class="stat"></span></button>
        <button class="btn-row" data-line="Truth"><span class="lhs"><span class="name">Truth</span></span><span class="stat"></span></button>
        <button class="btn-row" data-line="Recognition"><span class="lhs"><span class="name">Recognition</span></span><span class="stat"></span></button>
        <button class="btn-row" data-line="Bonding"><span class="lhs"><span class="name">Bonding</span></span><span class="stat"></span></button>
        <button class="btn-row" data-line="Stress"><span class="lhs"><span class="name">Stress</span></span><span class="stat"></span></button>
      </div>
    </section>

    <!-- Cards -->
    <section aria-labelledby="cards-h">
      <h2 id="cards-h" style="position:absolute;left:-9999px">Cards</h2>
      <div class="grid8">
        
        <div class="flip-card rebel-card" role="button" tabindex="0" aria-expanded="false"><div class="flip-inner"><div class="flip-face front card rebel"><h3>ğŸ§¨ Instinctive Rejection <span class="stars">â˜…â˜…â˜…â˜…â˜†</span></h3></div><div class="flip-face back card rebel"><h3>ğŸ§¨ Instinctive Rejection <span class="stars">â˜…â˜…â˜…â˜…â˜†</span></h3><p class="speech">You resist pressure before you even process it. Expectations, commands, systemsâ€”your default is no. You fight by existing on your own terms. But resistance can become reflex, not clarity.</p><p class="speech">â†’ What if you said yes without it meaning surrender?</p></div></div></div>
        <div class="flip-card rebel-card" role="button" tabindex="0" aria-expanded="false"><div class="flip-inner"><div class="flip-face front card rebel"><h3>ğŸ› ï¸ Selfâ€‘Directed Repair <span class="stars">â˜…â˜…â˜…â˜…â˜†</span></h3></div><div class="flip-face back card rebel"><h3>ğŸ› ï¸ Selfâ€‘Directed Repair <span class="stars">â˜…â˜…â˜…â˜…â˜†</span></h3><p class="speech">You donâ€™t wait for rescue. When you fall, you rebuild from scratchâ€”alone. You trust yourself more than any structure around you. But solo strength becomes isolation fast.</p><p class="speech">â†’ What support have you already rejected just to prove you donâ€™t need it?</p></div></div></div>
        <div class="flip-card rebel-card" role="button" tabindex="0" aria-expanded="false"><div class="flip-inner"><div class="flip-face front card rebel"><h3>ğŸ§± Structure Destruction <span class="stars">â˜…â˜…â˜…â˜†â˜†</span></h3></div><div class="flip-face back card rebel"><h3>ğŸ§± Structure Destruction <span class="stars">â˜…â˜…â˜…â˜†â˜†</span></h3><p class="speech">You expose weakness in systemsâ€”hierarchies, rules, unearned authority. You name the thing no one else will say. But demolition without vision just leaves rubble.</p><p class="speech">â†’ What are you building in place of what you break?</p></div></div></div>
        <div class="flip-card rebel-card" role="button" tabindex="0" aria-expanded="false"><div class="flip-inner"><div class="flip-face front card rebel"><h3>ğŸ•³ï¸ Displacement Patterns <span class="stars">â˜…â˜…â˜…â˜†â˜†</span></h3></div><div class="flip-face back card rebel"><h3>ğŸ•³ï¸ Displacement Patterns <span class="stars">â˜…â˜…â˜…â˜†â˜†</span></h3><p class="speech">Youâ€™ve been pushed out beforeâ€”misunderstood, punished, or framed as a threat. Over time, you started stepping out before youâ€™re pushed. But not every room is against you.</p><p class="speech">â†’ Are you leavingâ€”or escaping from being seen in full?</p></div></div></div>
        <div class="flip-card rebel-card" role="button" tabindex="0" aria-expanded="false"><div class="flip-inner"><div class="flip-face front card rebel"><h3>ğŸ”¥ Moral Edge <span class="stars">â˜…â˜…â˜…â˜†â˜†</span></h3></div><div class="flip-face back card rebel"><h3>ğŸ”¥ Moral Edge <span class="stars">â˜…â˜…â˜…â˜†â˜†</span></h3><p class="speech">You hold an internal justice code. When crossed, you burn bridgesâ€”no hesitation, no remorse. You don't do halfâ€‘truths or soft betrayal. But your code isolates you if no one else understands it.</p><p class="speech">â†’ What if you translated your code instead of just enforcing it?</p></div></div></div>
        <div class="flip-card rebel-card" role="button" tabindex="0" aria-expanded="false"><div class="flip-inner"><div class="flip-face front card rebel"><h3>Signal Discipline <span class="stars">â˜…â˜…â˜…â˜…â˜†</span></h3></div><div class="flip-face back card rebel"><h3>Signal Discipline <span class="stars">â˜…â˜…â˜…â˜…â˜†</span></h3><p class="speech">Keep reasons ahead of noise. Say the minimum that moves the decision. Cut flourish; raise proof.</p></div></div></div>
        <div class="flip-card rebel-card" role="button" tabindex="0" aria-expanded="false"><div class="flip-inner"><div class="flip-face front card rebel"><h3>Oneâ€‘Target Movement <span class="stars">â˜…â˜…â˜…â˜…â˜…</span></h3></div><div class="flip-face back card rebel"><h3>Oneâ€‘Target Movement <span class="stars">â˜…â˜…â˜…â˜…â˜…</span></h3><p class="speech">Drop side threads. Move one thing to done. Protect singleâ€‘slot work from drift.</p></div></div></div>
        

        <!-- GOLD $1 INVITE CARD -->
        <div class="flip-card compat-card" role="button" tabindex="0" aria-expanded="false">
          <div class="flip-inner">
        <div class="flip-face front card compat-gold" aria-labelledby="compat-h">
          <h3 id="compat-h"><span class="intro">For $1 only</span> Invite someone you trust â€” friend, partner, rival, or teammate â€” and see what really happens when your archetypes meet. <span class="mag" aria-hidden="true">ğŸ”</span></h3>
        </div>
    
        <div class="flip-face back card compat-gold" aria-labelledby="compat-h-back">
          <h3 id="compat-h-back"><span class="intro">For $1 only</span> Invite someone you trust â€” friend, partner, rival, or teammate â€” and see what really happens when your archetypes meet. <span class="mag" aria-hidden="true">ğŸ”</span></h3>
          <div class="starline">â˜…â˜…â˜…â˜…â˜…</div>
          <ul>
            <li>Results, sideâ€‘byâ€‘side â€¢ Shared strengths</li>
            <li>Potential clash zones â€¢ Compatibility score</li>
            <li>Key blind spot for each â€¢ Communication tip</li>
            <li>Team summary</li>
          </ul>
          <div style="margin-top:12px;display:flex;justify-content:flex-end">
            <button class="btn">Get Compatibility â€” $1</button>
          </div>
        </div>
    
          </div>
        </div>
      </div>
    </section>

    <!-- Edge â€” Watch for -->
    <section aria-labelledby="edge-h">
      <h2 id="edge-h" style="margin:16px 0 8px;font-size:16px;letter-spacing:.3px">âš ï¸ Edge â€” Watch for</h2>
      <article class="card rebel" style="border-color:rgba(255,62,165,.25)">
        <p class="speech">You stir chaos even when itâ€™s calmâ€”poking, testing, erupting. Sometimes itâ€™s real. Sometimes you just need to feel alive. But not every fire means something needs to burn.</p>
        <p class="speech">â†’ Are you calling something outâ€”or calling something in?</p>
      </article>
    </section>

    <div class="codebar"><div class="pill">Code: <strong>COCFOCC</strong></div></div>
  </div>

  



<script>
  // Heat map state (unchanged)
  const state = { Control:'C', Pace:'C', Boundary:'C', Truth:'C', Recognition:'C', Bonding:'C', Stress:'C' };
  const phrases = {
      Control: { 
        C: 'authority holds; call lands',
        O: 'authority drifts; call soft',
        F: 'betrayed your authority'
      },
      Pace: {
        C: 'rhythm steady; ships now',
        O: 'rhythm loosens; delays stack',
        F: 'betrayed your time'
      },
      Boundary: {
        C: 'line firm; scope clean',
        O: 'line blurs; scope creeps',
        F: 'betrayed your line'
      },
      Truth: {
        C: 'reason clear; signal sharp',
        O: 'signal muddies; reason thins',
        F: 'betrayed your call'
      },
      Recognition: {
        C: 'proof visible; outcomes known',
        O: 'proof unclear; outcomes hidden',
        F: 'betrayed your proof'
      },
      Bonding: {
        C: 'trust solid; commitments honored',
        O: 'trust wobbles; favors others',
        F: 'betrayed yourself for them'
      },
      Stress: {
        C: 'pressure channels to motion',
        O: 'movement wavers; pressure redirects',
        F: 'betrayed your movement'
      },
    };
  /* leak data removed */

  /* leak panel refs removed */

  function renderHeat(){
    document.querySelectorAll('.btn-row').forEach(row => {
      const line = row.dataset.line;
      const s = state[line] || 'C';
      row.dataset.state = s;
      const stat = row.querySelector('.stat');
      if(stat){ stat.textContent = `${s} â†’ ${phrases[line][s]}`; }
    });
  }
  function cycle(s){ return s === 'C' ? 'O' : s === 'O' ? 'F' : 'C'; }
  /* maybeLeak removed */
  document.querySelectorAll('.btn-row').forEach(row => {
    row.addEventListener('click', () => {
      const line = row.dataset.line;
      state[line] = cycle(state[line]);
      renderHeat();
      
    });
  });
  renderHeat();

  // ----- Visited marking for flip-cards (with localStorage) -----
  const VISITED_KEY = 'rebel_cards_visited_v1';
  function getVisited(){
    try { return JSON.parse(localStorage.getItem(VISITED_KEY)) || {}; } catch { return {}; }
  }
  function saveVisited(map){ try { localStorage.setItem(VISITED_KEY, JSON.stringify(map)); } catch {} }
  function slug(s){ return (s||'').toLowerCase().replace(/[^a-z0-9]+/g,'-').replace(/(^-|-$)/g,''); }

  const cards = Array.from(document.querySelectorAll('.flip-card'));
  // assign keys
  cards.forEach((c,i)=>{
    if(!c.dataset.key){
      const h = c.querySelector('h3');
      c.dataset.key = h ? slug(h.textContent) : 'card-' + i;
    }
  });

  // hydrate visited
  const visited = getVisited();
  cards.forEach(c => { if(visited[c.dataset.key]) c.classList.add('visited'); });

  function closeAll(except){
    cards.forEach(c => {
      if(c !== except){ c.classList.remove('expanded'); c.setAttribute('aria-expanded','false'); }
    });
  }
  function openCard(card){
    closeAll(card);
    card.classList.add('expanded'); card.setAttribute('aria-expanded','true');
    // mark visited
    card.classList.add('visited');
    visited[card.dataset.key] = true;
    saveVisited(visited);
  }
  function toggleCard(card){
    const isOpen = card.classList.contains('expanded');
    if(isOpen){
      card.classList.remove('expanded'); card.setAttribute('aria-expanded','false');
    }else{
      openCard(card);
    }
  }
  cards.forEach(card => {
    card.addEventListener('click', () => toggleCard(card));
    card.addEventListener('keydown', (e) => {
      if(e.key === 'Enter' || e.key === ' '){ e.preventDefault(); toggleCard(card); }
      if(e.key === 'Escape'){ e.preventDefault(); card.classList.remove('expanded'); card.setAttribute('aria-expanded','false'); }
    });
  });
</script>

</body>
</html>
